
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://apigee.github.io/apigee-go-gen/render/mcp/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../using-built-in-helpers/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>MCP - Apigee Go Gen</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
<meta name="google-site-verification" content="ICpzbiLv5ezn0VKu3azxy4LI3mimK5Q0w0MfmKry34Q" />
  

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mcp" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Apigee Go Gen" class="md-header__button md-logo" aria-label="Apigee Go Gen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apigee Go Gen
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              MCP
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/apigee/apigee-go-gen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Apigee Go Gen" class="md-nav__button md-logo" aria-label="Apigee Go Gen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Apigee Go Gen
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/apigee/apigee-go-gen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apigee Go Gen
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mock
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Mock
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mock/mock-openapi-description/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mock OpenAPI Description
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mock/commands/mock-oas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mock OAS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Render
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Render
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    MCP
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    MCP
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How It Works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-the-mcp-api-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create the MCP API proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-deploy-the-mcp-api-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      2. Deploy the MCP API proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-test-the-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      3. Test the MCP Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Test the MCP Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-with-curl" class="md-nav__link">
    <span class="md-ellipsis">
      Test with curl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-with-the-mcp-inspector" class="md-nav__link">
    <span class="md-ellipsis">
      Test with the MCP Inspector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-with-an-ai-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      Test with an AI Assistant
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template-features" class="md-nav__link">
    <span class="md-ellipsis">
      Template Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automated-tool-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Automated Tool Mapping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter Mapping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transcoding" class="md-nav__link">
    <span class="md-ellipsis">
      Transcoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-body-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Request Body Formats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth-2-openid-connect" class="md-nav__link">
    <span class="md-ellipsis">
      OAuth 2 / OpenID Connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apigee-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Apigee Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apigee-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Apigee Authorization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-response-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Response Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-side-tool-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Server-side Tool Filtering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-built-in-helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Built-in Helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-custom-helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Custom Helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-graphql-schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using GraphQL Schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-grpc-proto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using gRPC Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using-openapi-description/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using OpenAPI Description
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <label class="md-nav__link" for="__nav_4_8" id="__nav_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/render-apiproxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Render API Proxy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/render-sharedflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Render Shared Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/render-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Render Template
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../transform/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Transform
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Transform
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/apiproxy-to-yaml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Proxy to YAML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/json-to-yaml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON to YAML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/oas-overlay/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OAS Overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/oas2-to-oas3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI 2 to OpenAPI 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/resolve-refs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resolve Refs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/sharedflow-to-yaml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shared Flow to YAML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/xml-to-yaml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XML to YAML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/yaml-to-apiproxy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    YAML to API Proxy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/yaml-to-json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    YAML to JSON
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/yaml-to-sharedflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    YAML to Shared Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transform/commands/yaml-to-xml/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    YAML to XML
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How It Works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      Example
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-create-the-mcp-api-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create the MCP API proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-deploy-the-mcp-api-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      2. Deploy the MCP API proxy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-test-the-mcp-server" class="md-nav__link">
    <span class="md-ellipsis">
      3. Test the MCP Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Test the MCP Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-with-curl" class="md-nav__link">
    <span class="md-ellipsis">
      Test with curl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-with-the-mcp-inspector" class="md-nav__link">
    <span class="md-ellipsis">
      Test with the MCP Inspector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-with-an-ai-assistant" class="md-nav__link">
    <span class="md-ellipsis">
      Test with an AI Assistant
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template-features" class="md-nav__link">
    <span class="md-ellipsis">
      Template Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Template Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automated-tool-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Automated Tool Mapping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameter-mapping" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter Mapping
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transcoding" class="md-nav__link">
    <span class="md-ellipsis">
      Transcoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#request-body-formats" class="md-nav__link">
    <span class="md-ellipsis">
      Request Body Formats
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oauth-2-openid-connect" class="md-nav__link">
    <span class="md-ellipsis">
      OAuth 2 / OpenID Connect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apigee-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Apigee Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apigee-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Apigee Authorization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-response-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Binary Response Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#server-side-tool-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      Server-side Tool Filtering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/apigee/apigee-go-gen/edit/main/docs/render/mcp.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>
    </a>
  
  


<h1 id="mcp">MCP</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This MCP functionality in <code>apigee-go-gen</code> is currently in <strong>beta</strong> and under active development. To use this feature, you must install the latest beta build of the tool.</p>
<p>The MCP specification itself is evolving. This implementation strives to align with the latest version of the <a href="https://modelcontextprotocol.io/specification/latest">MCP spec</a>.</p>
<p>If you have feedback or encounter bugs, please open an issue on GitHub <a href="https://github.com/apigee/apigee-go-gen/issues">apigee-go-gen/issues</a>.</p>
</div>
<p>You can use the <code>render apiproxy</code> command to convert an <a href="https://openapis.org">OpenAPI 3.x</a> description into an API proxy that functions as an <a href="https://modelcontextprotocol.io">MCP</a> server. </p>
<p>This process is useful for exposing operations from an existing REST API as MCP tools. </p>
<p>This is sometimes referred to as "MCPfying" a REST API.</p>
<hr />
<h2 id="how-it-works">How It Works</h2>
<ul class="task-list">
<li class="task-list-item">
<p><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>Provide an OpenAPI Description</strong></p>
<blockquote>
<p>Start with an existing OpenAPI 3.x description of your REST API.</p>
</blockquote>
</li>
<li class="task-list-item">
<p><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>Get the MCP Template</strong></p>
<blockquote>
<p>Use baseline MCP template is provided in the <a href="https://github.com/apigee/apigee-go-gen/blob/main/examples/templates/mcp/apiproxy.yaml"><code>examples/templates/mcp/</code></a> directory. You can use it as-is or customize it to add specific policies or settings to your final API proxy.</p>
</blockquote>
</li>
<li class="task-list-item">
<p><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>Generate the MCP API proxy</strong></p>
<blockquote>
<p>Use the <code>render apiproxy</code> command to generate a deployable MCP API proxy bundle from your OpenAPI Description and the template.</p>
</blockquote>
</li>
<li class="task-list-item">
<p><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>Deploy the API proxy</strong></p>
<blockquote>
<p>Use the <a href="https://github.com/apigee/apigeecli">apigeecli</a> tool to deploy the generated API proxy bundle to your Apigee runtime environment.</p>
</blockquote>
</li>
<li class="task-list-item">
<p><label class="task-list-control"><input type="checkbox" disabled checked/><span class="task-list-indicator"></span></label> <strong>Use the MCP Server</strong></p>
<blockquote>
<p>Once deployed, the API proxy acts as an MCP server. The operations from your original OpenAPI Description are now exposed as MCP tools.</p>
</blockquote>
</li>
</ul>
<hr />
<h2 id="example">Example</h2>
<p>This example demonstrates how to convert the <code>weather.yaml</code> OpenAPI Description into an Apigee API proxy that serves MCP tools.</p>
<h3 id="1-create-the-mcp-api-proxy">1. Create the MCP API proxy</h3>
<p>Generate the API proxy bundle using the <code>render apiproxy</code> command. This command uses the MCP template and the sample <code>weather.yaml</code> OpenAPI spec.</p>
<p><div class="language-shell highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>apigee-go-gen<span class="w"> </span>render<span class="w"> </span>apiproxy<span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span>--template<span class="w"> </span>./examples/templates/mcp/apiproxy.yaml<span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span>--include<span class="w"> </span>./examples/templates/mcp/*.tmpl<span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span>--set-oas<span class="w"> </span><span class="nv">spec</span><span class="o">=</span>./examples/specs/oas3/weather.yaml<span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span>--set<span class="w"> </span><span class="nv">base_path</span><span class="o">=</span>/mcp/weather<span class="w"> </span><span class="se">\</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span>--output<span class="w"> </span>./out/apiproxies/weather.zip
</span></code></pre></div>
Note that the <code>--set base_path</code> flag overrides the base path defined in the OpenAPI spec, setting it to <code>/mcp/weather</code> for this proxy.</p>
<h3 id="2-deploy-the-mcp-api-proxy">2. Deploy the MCP API proxy</h3>
<p>Use <code>apigeecli</code> to deploy the generated API proxy bundle to your Apigee organization and environment.</p>
<p><div class="language-shell highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Set your environment variables</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PROJECT_ID</span><span class="o">=</span><span class="s2">&quot;your-gcp-project-id&quot;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">APIGEE_ORG</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_ID</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">APIGEE_ENV</span><span class="o">=</span><span class="s2">&quot;eval&quot;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="c1"># Configure gcloud</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>gcloud<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>project<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_ID</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>gcloud<span class="w"> </span>auth<span class="w"> </span>login
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="c1"># Deploy the bundle</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>apigeecli<span class="w"> </span>apis<span class="w"> </span>create<span class="w"> </span>bundle<span class="w">  </span><span class="se">\</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">   </span>--proxy-zip<span class="w"> </span>./out/apiproxies/weather.zip<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">   </span>--name<span class="w">  </span>mcp-weather<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">   </span>--org<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">APIGEE_ORG</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">   </span>--env<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">APIGEE_ENV</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">   </span>--ovr<span class="w"> </span><span class="se">\</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">   </span>--default-token
</span></code></pre></div>
Once deployed, the URL for your new MCP server will be <code>https://${APIGEE_HOSTNAME}/mcp/weather</code>.</p>
<h3 id="3-test-the-mcp-server">3. Test the MCP Server</h3>
<p>You can test your new MCP server in several ways.</p>
<h4 id="test-with-curl">Test with <code>curl</code></h4>
<p>A quick way to verify functionality is to make a <code>tools/call</code> request using <code>curl</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Set your Apigee hostname</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">APIGEE_HOSTNAME</span><span class="o">=</span><span class="s2">&quot;your-apigee-hostname&quot;</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>curl<span class="w"> </span><span class="s2">&quot;https://</span><span class="si">${</span><span class="nv">APIGEE_HOSTNAME</span><span class="si">}</span><span class="s2">/mcp/weather&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;accept: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;content-type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="s1">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="s1">  &quot;method&quot;: &quot;tools/call&quot;,</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="s1">  &quot;params&quot;: {</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="s1">    &quot;name&quot;: &quot;alerts_query&quot;</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="s1">  },</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="s1">  &quot;id&quot;: 1</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="s1">}&#39;</span>
</span></code></pre></div>
<h4 id="test-with-the-mcp-inspector">Test with the MCP Inspector</h4>
<p>The <a href="https://github.com/modelcontextprotocol/inspector">MCP Inspector</a> is a web-based tool for interacting with MCP servers.</p>
<ol>
<li>Start the inspector using <code>npx</code>:
    <div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>npx<span class="w"> </span>@modelcontextprotocol/inspector
</span></code></pre></div></li>
<li>Open the provided URL in your browser.</li>
<li>Enter your MCP server URL (<code>https://${APIGEE_HOSTNAME}/mcp/weather</code>), connect to it, and explore the available tools.</li>
</ol>
<h4 id="test-with-an-ai-assistant">Test with an AI Assistant</h4>
<p>To interact with your new MCP server using natural language, you can configure an AI assistant to use it as a tool source. Assistants like the <a href="https://github.com/google-gemini/gemini-cli">Gemini CLI</a> and the <a href="https://claude.ai/download">Claude AI Desktop App</a> can connect to remote MCP servers.</p>
<ul>
<li><strong>Claude:</strong> <a href="https://modelcontextprotocol.io/docs/develop/connect-remote-servers#connecting-to-a-remote-mcp-server">Connecting to a remote MCP server</a></li>
<li><strong>Gemini CLI:</strong> <a href="https://google-gemini.github.io/gemini-cli/docs/tools/mcp-server.html#how-to-set-up-your-mcp-server">How to set up your MCP server</a></li>
</ul>
<h2 id="template-features">Template Features</h2>
<p>The baseline <a href="https://github.com/apigee/apigee-go-gen/blob/main/examples/templates/mcp/apiproxy.yaml">MCP template</a> automatically
generates an Apigee API proxy that acts as a bridge, allowing Large Language Models (LLMs) to securely interact with
existing REST APIs. The generated proxy handles the translation between the MCP format and standard REST API conventions.</p>
<hr />
<h3 id="automated-tool-mapping">Automated Tool Mapping</h3>
<p>The template parses a source <strong>OpenAPI Description</strong> to expose API endpoints as <strong>MCP tools</strong>. Every defined operation
(e.g., <code>GET /users</code>, <code>POST /products</code>) is automatically made available for an LLM to discover and call. 🗣️</p>
<p>The generated <code>tools/list</code> response provides a comprehensive definition for each tool, which includes:</p>
<ul>
<li><strong><code>inputSchema</code></strong>: Defines the required inputs for the tool, mapped from the API's request parameters.</li>
<li><strong><code>outputSchema</code></strong>: Defines the expected output structure, mapped directly from the response schema in the <strong>OpenAPI Description</strong>.</li>
</ul>
<p>Additionally, the MCP API proxy supports emitting <strong><code>structuredContent</code></strong> in the <code>tools/call</code> response. When the backend REST API
returns a JSON payload (<code>application/json</code>), the proxy automatically includes it as structured data, allowing the LLM to
parse the output directly without needing to interpret raw text.</p>
<hr />
<h3 id="parameter-mapping">Parameter Mapping</h3>
<p>API request parameters are automatically mapped from the MCP tool's input schema to the backend REST request.
The proxy ensures data from the LLM is correctly placed in the corresponding location for the target API. This includes:</p>
<ul>
<li><strong>Query Parameters</strong></li>
<li><strong>Header Values</strong></li>
<li><strong>Path Variables</strong></li>
<li><strong>Request Body Content</strong></li>
</ul>
<p>This seamless mapping enables the LLM to provide data for the API without needing to conform to the underlying REST structure.</p>
<hr />
<h3 id="transcoding">Transcoding</h3>
<p>A core function of the MCP API proxy is <strong>transcoding</strong> requests. All MCP tool calls arrive in a standardized <strong>JSON-RPC</strong> format.
The proxy automatically unwraps this payload and transforms it into a conventional REST API request that the backend
service can understand. 🤖➡️🌐</p>
<p>This process includes:</p>
<ul>
<li><strong>Unwrapping the Payload</strong>: Extracting the target operation, parameters, and body from the incoming JSON-RPC request.</li>
<li><strong>Setting HTTP Headers</strong>: Automatically setting necessary headers, such as <code>Content-Type</code> and <code>Accept</code>, based on the <strong>OpenAPI Description</strong>.</li>
<li><strong>Constructing the HTTP Request</strong>: Assembling the final <code>GET</code>, <code>POST</code>, <code>PUT</code>, etc., request with the correct URL, headers, and body.</li>
</ul>
<hr />
<h3 id="request-body-formats">Request Body Formats</h3>
<p>The template provides out-of-the-box support for backend APIs that consume either JSON or XML, handling the necessary
transformations automatically.</p>
<ul>
<li><strong><code>application/json</code></strong>: For JSON-based backends, the request body is simply unwrapped from the MCP tool input and passed through.</li>
<li><strong><code>application/xml</code></strong>: For XML-based backends, the proxy performs a two-step process:<ol>
<li>It unwraps the JSON data from the MCP request.</li>
<li>It transforms that JSON data into the correct XML format, using the schema defined in your <strong>OpenAPI Description</strong> to ensure validity.</li>
</ol>
</li>
</ul>
<hr />
<h3 id="oauth-2-openid-connect">OAuth 2 / OpenID Connect</h3>
<p>If the <strong>OpenAPI Description</strong> defines a security requirement of type <code>oauth2</code> or <code>openIdConnect</code>, the generated MCP API proxy includes a discovery endpoint to support the OAuth flow. 🔐</p>
<p>This endpoint serves the <strong>Protected Resource Metadata</strong> as required by the MCP specification.</p>
<p>The metadata endpoint is exposed at the following path:</p>
<p><code>/.well-known/oauth-protected-resource{mcp_server_basepath}</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It's crucial to understand that <strong>the generated proxy does not act as an authorization server</strong>.
Instead, this metadata simply informs the MCP client where to find the actual OAuth authorization server.</p>
<p>Additionally, whether dynamic client registration is supported is determined by the capabilities of the authorization
server itself, not the Apigee MCP API proxy.</p>
</div>
<hr />
<h3 id="apigee-authentication">Apigee Authentication</h3>
<p>The template can enforce API key validation for all incoming MCP requests, providing a foundational layer of security.</p>
<p><strong>How to Enable</strong>:</p>
<p>To enable this feature, set the <code>check_app_authentication=true</code> flag when rendering the template:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>apigee-go-gen<span class="w"> </span>render<span class="w"> </span>apiproxy<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">   </span>--set<span class="w"> </span><span class="nv">check_app_authentication</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">   </span>...
</span></code></pre></div>
<p>When enabled, the generated MCP API proxy will include a <a href="https://cloud.google.com/apigee/docs/api-platform/reference/policies/verify-api-key-policy">VerifyAPIKey</a> policy. 
All requests to the proxy must include a valid API key in the <code>x-apikey</code> HTTP header. Requests without a valid key will be rejected with a 401 Unauthorized error.</p>
<hr />
<h3 id="apigee-authorization">Apigee Authorization</h3>
<p>Beyond authentication, the template provides granular control over which MCP tools a specific client application can use. This is managed through Apigee's API Product configuration.</p>
<p><strong>How to Enable</strong>:</p>
<p>To enable this feature, set the <code>check_app_authorization=true</code> flag when rendering the template. Note that this automatically enables <code>check_app_authentication</code> as well.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>apigee-go-gen<span class="w"> </span>render<span class="w"> </span>apiproxy<span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">   </span>--set<span class="w"> </span><span class="nv">check_app_authorization</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">   </span>...
</span></code></pre></div>
<p><strong>How it Works</strong>:</p>
<p>Authorization is controlled using a <a href="https://cloud.google.com/apigee/docs/api-platform/publish/create-api-products#customattributes">custom API product attribute</a> named <code>mcp_tools</code>.
Thi is set in the API product associated with the client's API key. The value of this attribute is a simple <strong>comma-separated</strong> list of tool names.</p>
<p>The behavior is as follows:</p>
<ul>
<li>
<p><code>mcp_tools</code> is <strong>NOT</strong> defined (<strong>secure default</strong>):
  If the attribute is missing from the API product, no MCP <code>tools/call</code> requests are permitted. The <code>tools/list</code> method will return an empty list of tools. This is the most secure posture, as it requires explicit configuration to grant access.</p>
</li>
<li>
<p><code>mcp_tools</code> is <code>"*"</code> (<strong>wildcard</strong>):
  If the attribute is set to the single wildcard character <strong><code>*</code></strong>, all tools are authorized. The <code>tools/list</code> response will include all tools generated from the OpenAPI Description.</p>
</li>
<li>
<p><code>mcp_tools</code> is <code>"tool_a, tool_b, etc"</code> (<strong>granular</strong>):
  If the attribute contains a comma-separated list of specific tool names, only those tools are authorized for <code>tools/call</code>. The <code>tools/list</code> response will be filtered to only show those specific tools.</p>
</li>
<li>
<p><code>mcp_tools</code> is <code>""</code> (<strong>empty</strong>):
  If the attribute is an empty string, no tools are authorized. Any <code>tools/call</code> request will be denied, and the <code>tools/list</code> method will return an empty list.</p>
</li>
</ul>
<h3 id="binary-response-handling">Binary Response Handling</h3>
<p>The MCP API proxy template automatically handles binary data returned from backend REST APIs, ensuring that non-textual content is correctly formatted for the LLM. 🖼️🎵</p>
<p>This feature processes the <code>Content-Type</code> header of the backend response and transcodes the payload into the appropriate MCP tool response format.</p>
<ul>
<li><strong>Images (<code>image/*</code>)</strong>: If the backend returns an image (e.g., <code>image/png</code>, <code>image/jpeg</code>), the proxy automatically encodes it into a base64 string and wraps it in an MCP <a href="https://modelcontextprotocol.io/specification/2025-06-18/server/tools#image-content">image content</a> tool response.</li>
<li><strong>Audio (<code>audio/*</code>)</strong>: Similarly, audio responses (e.g., <code>audio/mpeg</code>, <code>audio/wav</code>) are base64 encoded and returned using the MCP <a href="https://modelcontextprotocol.io/specification/2025-06-18/server/tools#audio-content">audio content</a> tool response type.</li>
<li><strong>Other Binary Types</strong>: For other binary content like <code>application/pdf</code> or <code>application/zip</code>, the proxy creates an MCP <a href="https://modelcontextprotocol.io/specification/2025-06-18/server/tools#embedded-resources">embedded resource</a> tool response. The binary data is base64 encoded and embedded within the <code>blob</code> field of the resource object.</li>
</ul>
<p>This built-in handling allows LLMs to receive and process images, audio files, and other documents directly from your existing APIs without any additional configuration.</p>
<h3 id="server-side-tool-filtering">Server-side Tool Filtering</h3>
<p>The MCP API proxy provides a mechanism to dynamically filter the list of tools returned by the <code>tools/list</code> method. 
This is particularly useful for preventing "context rot", a scenario where providing an LLM with too many tool options can degrade its performance and ability to select the correct tool. 🧠</p>
<p>This filtering is applied <strong>independently</strong> of the authorization rules set in the API Product.</p>
<p><strong>How it Works</strong>:</p>
<p>Filtering is controlled via the <code>x-mcp-tools-filter</code> HTTP header. The header value is a <strong>comma-separated</strong> list of tool names you wish to include in the response of the <code>tools/list</code> call.</p>
<ul>
<li><strong>Specific Tools</strong>: A request with the header <code>x-mcp-tools-filter: tool_a, tool_c</code> will only receive <code>tool_a</code> and <code>tool_c</code> in the <code>tools/list</code> response (provided they are also allowed by the API Product authorization, if enabled).</li>
<li><strong>No Filtering</strong>: A request with <code>x-mcp-tools-filter: *</code> (a single wildcard) or a request without the header will return all available tools.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "toc.follow", "content.code.copy", "content.code.select", "navigation.indexes", "navigation.path", "navigation.tracking", "search.share", "search.highlight", "content.action.edit"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>